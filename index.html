<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=cover"><title>BUBBLE</title><style>*{margin:0;padding:0}html,body{width:100%;height:100%}body{background:linear-gradient(135deg,#FF00FF,#00FFFF,#FFFF00,#FF0080);overflow:hidden}canvas{display:block}#ui{position:fixed;top:0;left:0;width:100%;padding:10px;text-align:center;color:#fff;font-weight:bold;font-size:18px;z-index:10;text-shadow:0 0 5px #000}</style></head><body><div id="ui">SCORE: <span id="s">0</span> | MOVES: <span id="m">30</span></div><canvas id="c"></canvas><script src="https://telegram.org/js/telegram-web-app.js"></script><script>try{Telegram.WebApp.ready();Telegram.WebApp.expand()}catch(e){}const c=document.getElementById('c'),x=c.getContext('2d');let W=c.width=window.innerWidth,H=c.height=window.innerHeight;const cols=6,rows=8;const col=['#FF0000','#00FF00','#0000FF','#FFFF00','#FF00FF','#00FFFF','#FF6600','#FF00FF'];let balls=[],score=0,moves=30,shooter={x:W/2,y:H-40,color:0},popAnim=[];function init(){balls=[];let spacing=40;for(let r=0;r<rows;r++){for(let c=0;c<cols;c++){balls.push({x:c*spacing+50,y:r*spacing+80,color:Math.floor(Math.random()*col.length)})}}shooter.color=Math.floor(Math.random()*col.length);score=0;moves=30;document.getElementById('s').innerText=score;document.getElementById('m').innerText=moves;popAnim=[];draw()}function draw(){x.fillStyle='transparent';x.clearRect(0,0,W,H);balls.forEach(b=>{x.fillStyle=col[b.color];x.beginPath();x.arc(b.x,b.y,16,0,Math.PI*2);x.fill()});popAnim.forEach((p,i)=>{let prog=p.t/p.d;if(prog>=1){popAnim.splice(i,1);return}let s=1+prog*0.3;let a=1-prog;x.save();x.globalAlpha=a;x.fillStyle=col[p.c];x.beginPath();x.arc(p.x,p.y,16*s,0,Math.PI*2);x.fill();x.restore();p.t+=20});x.fillStyle=col[shooter.color];x.beginPath();x.arc(shooter.x,shooter.y,18,0,Math.PI*2);x.fill()}function dist(x1,y1,x2,y2){return Math.sqrt((x2-x1)**2+(y2-y1)**2)}function shoot(tx,ty){if(moves<=0)return;let dx=tx-shooter.x,dy=ty-shooter.y,d=dist(shooter.x,shooter.y,tx,ty);if(d<10)return;let vx=dx/d*8,vy=dy/d*8,bx=shooter.x,by=shooter.y,bc=shooter.color;let hit=-1;let int=setInterval(()=>{bx+=vx;by+=vy;if(bx<16)vx=-vx;if(bx>W-16)vx=-vx;for(let i=0;i<balls.length;i++){if(dist(bx,by,balls[i].x,balls[i].y)<32){hit=i;break}}if(hit>=0||by<0){clearInterval(int);if(hit>=0){balls.splice(hit,0,{x:bx,y:by,color:bc});let grp=getGrp(0);if(grp.length>=3){grp.sort((a,b)=>b-a).forEach(i=>{popAnim.push({x:balls[i].x,y:balls[i].y,c:balls[i].color,t:0,d:300});balls.splice(i,1)});score+=grp.length*10;document.getElementById('s').innerText=score}moves--;document.getElementById('m').innerText=moves;shooter.color=Math.floor(Math.random()*col.length);if(moves<=0)alert('GAME OVER\nScore: '+score);}draw();return;}draw()},25)}function getGrp(idx){let v=new Set(),q=[idx],g=[];while(q.length){let i=q.shift();if(v.has(i))continue;v.add(i);g.push(i);for(let j=0;j<balls.length;j++){if(!v.has(j)&&balls[j].color===balls[i].color&&dist(balls[i].x,balls[i].y,balls[j].x,balls[j].y)<50){q.push(j)}}}return g}c.onclick=e=>shoot(e.clientX,e.clientY);c.ontouchstart=e=>{e.preventDefault();shoot(e.touches[0].clientX,e.touches[0].clientY)};window.onresize=()=>{W=c.width=window.innerWidth;H=c.height=window.innerHeight;draw()};(function loop(){draw();requestAnimationFrame(loop)})();init();</script></body></html>
