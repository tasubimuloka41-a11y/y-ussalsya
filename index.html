<!DOCTYPE html><html><head><meta charset="UTF-8"><title>üéÆ BUBBLE SHOOTER PREMIUM</title><style>*{margin:0;padding:0;box-sizing:border-box}body{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#7FD13B,#FFD700,#FF8C00);font-family:Arial,sans-serif;overflow:hidden}#game{position:relative}#ui{position:absolute;top:20px;left:50%;transform:translateX(-50%);display:flex;gap:40px;z-index:10}#ui div{color:#fff;font-size:24px;font-weight:700;text-shadow:2px 2px 4px #000}canvas{display:block;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,.3)}#gameOver{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.9);color:#fff;padding:40px;border-radius:20px;display:none;text-align:center;z-index:100}#gameOver h1{font-size:48px;color:#FF1744;margin-bottom:20px}#gameOver button{margin-top:20px;padding:15px 40px;font-size:20px;background:linear-gradient(135deg,#FF1744,#FF6F00);border:none;border-radius:50px;color:#fff;cursor:pointer;font-weight:700}</style></head><body><div id="game"><div id="ui"><div>–û—á–∫–∏: <span id="score">0</span></div><div>–•–æ–¥—ã: <span id="moves">30</span></div></div><canvas id="c" width="600" height="800"></canvas><div id="gameOver"><h1>GAME OVER!</h1><p>–û—á–∫–∏: <span id="finalScore">0</span></p><p>–†–µ–∫–æ—Ä–¥: <span id="bestScore">0</span></p><button onclick="location.reload()">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button></div></div><script>const c=document.getElementById('c'),x=c.getContext('2d'),COLS=8,ROWS=11,SIZE=60,OFFSET=30,COLORS=['#FF1744','#00E676','#00B0FF','#FFEA00'];let grid=[],score=0,moves=30,shooter,nextBubble,mouseX=300,mouseY=400,shotBubble=null,active=!0;for(let r=0;r<ROWS;r++){grid[r]=[];for(let c=0;c<COLS;c++)grid[r][c]=r<5?{color:COLORS[~~(Math.random()*4)],x:c*SIZE+(r%2?OFFSET:0)+SIZE/2,y:r*SIZE+SIZE/2}:null}function randomColor(){return COLORS[~~(Math.random()*4)]}function resetShooter(){shooter={color:nextBubble||randomColor(),x:300,y:750,radius:25};nextBubble=randomColor()}function drawBubble(x,y,color,r=25){const g=x.createRadialGradient(x-8,y-8,5,x,y,r);g.addColorStop(0,'rgba(255,255,255,0.9)');g.addColorStop(.5,color);g.addColorStop(1,color);x.fillStyle=g;x.beginPath();x.arc(x,y,r,0,7);x.fill()}function drawGrid(){for(let r=0;r<ROWS;r++)for(let c=0;c<COLS;c++)if(grid[r][c]){const b=grid[r][c];x.fillStyle=b.color;x.beginPath();x.arc(b.x,b.y,25,0,7);const g=x.createRadialGradient(b.x-8,b.y-8,5,b.x,b.y,25);g.addColorStop(0,'rgba(255,255,255,0.9)');g.addColorStop(.5,b.color);g.addColorStop(1,b.color);x.fillStyle=g;x.fill()}}function getNeighbors(r,c){const even=r%2==0,n=even?[[-1,0],[1,0],[0,-1],[0,1],[-1,-1],[-1,1]]:[[-1,0],[1,0],[0,-1],[0,1],[1,-1],[1,1]],res=[];for(let[dr,dc]of n){const nr=r+dr,nc=c+dc;if(nr>=0&&nr<ROWS&&nc>=0&&nc<COLS&&grid[nr][nc])res.push({r:nr,c:nc})}return res}function findMatches(r,c,color,visited=new Set()){const key=r+','+c;if(visited.has(key))return[];if(!grid[r][c]||grid[r][c].color!=color)return[];visited.add(key);let m=[{r,c}];getNeighbors(r,c).forEach(({r:nr,c:nc})=>{m=m.concat(findMatches(nr,nc,color,visited))});return m}function removeMatches(m){m.forEach(({r,c})=>grid[r][c]=null);score+=m.length==3?10:m.length==4?25:50+(m.length-5)*10;document.getElementById('score').textContent=score}function snap(){let minDist=999,bestR=-1,bestC=-1;for(let r=0;r<ROWS;r++)for(let c=0;c<COLS;c++)if(!grid[r][c]){const bx=c*SIZE+(r%2?OFFSET:0)+SIZE/2,by=r*SIZE+SIZE/2,d=Math.hypot(shotBubble.x-bx,shotBubble.y-by);if(d<minDist){minDist=d;bestR=r;bestC=c}}if(bestR>=0){grid[bestR][bestC]={color:shotBubble.color,x:bestC*SIZE+(bestR%2?OFFSET:0)+SIZE/2,y:bestR*SIZE+SIZE/2};const m=findMatches(bestR,bestC,shotBubble.color);console.log('Found',m.length,'matches at',bestR,bestC);if(m.length>=3){console.log('Removing matches!');removeMatches(m)}shotBubble=null;moves--;document.getElementById('moves').textContent=moves;if(moves<=0||bestR>=ROWS-1){active=!1;const best=localStorage.getItem('best')||0;if(score>best)localStorage.setItem('best',score);document.getElementById('finalScore').textContent=score;document.getElementById('bestScore').textContent=Math.max(score,best);document.getElementById('gameOver').style.display='block'}resetShooter()}}function update(){if(!active)return;if(shotBubble){shotBubble.x+=shotBubble.vx;shotBubble.y+=shotBubble.vy;if(shotBubble.x<25||shotBubble.x>575)shotBubble.vx*=-1;if(shotBubble.y<25){snap();return}let collision=false;for(let r=0;r<ROWS;r++){for(let c=0;c<COLS;c++){if(grid[r][c]){const b=grid[r][c];if(Math.hypot(shotBubble.x-b.x,shotBubble.y-b.y)<50){collision=true;break}}if(collision)break}}if(collision)snap()}}function render(){x.clearRect(0,0,600,800);drawGrid();if(shooter){x.fillStyle=shooter.color;x.beginPath();x.arc(shooter.x,shooter.y,25,0,7);const g=x.createRadialGradient(shooter.x-8,shooter.y-8,5,shooter.x,shooter.y,25);g.addColorStop(0,'rgba(255,255,255,0.9)');g.addColorStop(.5,shooter.color);g.addColorStop(1,shooter.color);x.fillStyle=g;x.fill();if(!shotBubble){x.strokeStyle='rgba(255,255,255,0.5)';x.lineWidth=2;x.setLineDash([5,5]);x.beginPath();x.moveTo(shooter.x,shooter.y);const a=Math.atan2(mouseY-shooter.y,mouseX-shooter.x);x.lineTo(shooter.x+Math.cos(a)*500,shooter.y+Math.sin(a)*500);x.stroke();x.setLineDash([])}}if(shotBubble){x.fillStyle=shotBubble.color;x.beginPath();x.arc(shotBubble.x,shotBubble.y,25,0,7);const g=x.createRadialGradient(shotBubble.x-8,shotBubble.y-8,5,shotBubble.x,shotBubble.y,25);g.addColorStop(0,'rgba(255,255,255,0.9)');g.addColorStop(.5,shotBubble.color);g.addColorStop(1,shotBubble.color);x.fillStyle=g;x.fill()}x.fillStyle='#fff';x.font='14px Arial';x.textAlign='center';x.fillText('NEXT',300,780);x.fillStyle=nextBubble;x.beginPath();x.arc(300,760,20,0,7);const g=x.createRadialGradient(292,752,3,300,760,20);g.addColorStop(0,'rgba(255,255,255,0.9)');g.addColorStop(.5,nextBubble);g.addColorStop(1,nextBubble);x.fillStyle=g;x.fill()}function gameLoop(){update();render();requestAnimationFrame(gameLoop)}c.addEventListener('click',e=>{if(!active||shotBubble)return;const rect=c.getBoundingClientRect(),mx=e.clientX-rect.left,my=e.clientY-rect.top,a=Math.atan2(my-shooter.y,mx-shooter.x);shotBubble={x:shooter.x,y:shooter.y,vx:Math.cos(a)*10,vy:Math.sin(a)*10,color:shooter.color}});c.addEventListener('mousemove',e=>{const rect=c.getBoundingClientRect();mouseX=e.clientX-rect.left;mouseY=e.clientY-rect.top});resetShooter();gameLoop();</script></body></html>
