<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>üéÆ BUBBLE SHOOTER PREMIUM</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Arial,sans-serif;background:linear-gradient(-45deg,#FF1744,#FF6F00,#00E676,#00B0FF,#D500F9);background-size:400% 400%;animation:gradient 15s ease infinite;display:flex;justify-content:center;align-items:center;min-height:100vh}
@keyframes gradient{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
#gameContainer{position:relative;text-align:center}
#score,#moves{color:#fff;font-size:24px;font-weight:bold;margin:10px;text-shadow:2px 2px 4px rgba(0,0,0,0.5)}
canvas{display:block;margin:20px auto;cursor:crosshair}
button{font-size:18px;font-weight:bold;padding:12px 30px;margin:10px;background:linear-gradient(135deg,#FF1744,#F50057);color:#fff;border:none;border-radius:50px;cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,0.3);transition:all 0.3s}
button:hover{transform:translateY(-2px) scale(1.05);box-shadow:0 6px 15px rgba(0,0,0,0.4)}
</style>
</head>
<body>
<div id="gameContainer">
<h1 style="color:#fff;font-size:36px;text-shadow:3px 3px 6px rgba(0,0,0,0.5);margin-bottom:20px">üéÆ BUBBLE SHOOTER</h1>
<div id="score">–û—á–∫–∏: 0</div>
<div id="moves">–•–æ–¥—ã: 30</div>
<canvas id="gameCanvas" width="600" height="700"></canvas>
<button id="restart">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
</div>
<script>
const canvas=document.getElementById('gameCanvas');
const ctx=canvas.getContext('2d',{alpha:true});
const COLORS=['#FF1744','#00E676','#00B0FF','#FFEA00'];
const ROWS=12;
const COLS=10;
const SIZE=60;
let grid=[];
let score=0;
let movesLeft=30;
let currentBall={x:300,y:650,color:null,angle:0};
let nextColor=COLORS[Math.floor(Math.random()*COLORS.length)];
let mouseX=300;
let mouseY=0;

function initGrid(){
for(let r=0;r<ROWS;r++){
grid[r]=[];
for(let c=0;c<COLS;c++){
if(r<5){
grid[r][c]=COLORS[Math.floor(Math.random()*COLORS.length)];
}else{
grid[r][c]=null;
}
}
}
}

function drawBall(x,y,color){
if(!color)return;
ctx.save();
ctx.shadowColor='rgba(0,0,0,0.3)';
ctx.shadowBlur=8;
ctx.shadowOffsetX=3;
ctx.shadowOffsetY=3;
ctx.beginPath();
ctx.arc(x,y,SIZE/2-5,0,Math.PI*2);
ctx.fillStyle=color;
ctx.fill();
ctx.strokeStyle='rgba(255,255,255,0.3)';
ctx.lineWidth=2;
ctx.stroke();
ctx.restore();
}

function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);
for(let r=0;r<ROWS;r++){
for(let c=0;c<COLS;c++){
if(grid[r][c]){
drawBall(c*SIZE+SIZE/2,r*SIZE+SIZE/2,grid[r][c]);
}
}
}
if(currentBall.color){
drawBall(currentBall.x,currentBall.y,currentBall.color);
ctx.save();
ctx.strokeStyle='rgba(255,255,255,0.5)';
ctx.lineWidth=2;
ctx.setLineDash([5,5]);
ctx.beginPath();
ctx.moveTo(currentBall.x,currentBall.y);
let angle=Math.atan2(mouseY-currentBall.y,mouseX-currentBall.x);
ctx.lineTo(currentBall.x+Math.cos(angle)*200,currentBall.y+Math.sin(angle)*200);
ctx.stroke();
ctx.restore();
}
drawBall(300,680,nextColor);
}

function findMatches(row,col){
if(!grid[row]||!grid[row][col])return[];
const color=grid[row][col];
const visited={};
const matches=[];
function dfs(r,c){
if(r<0||r>=ROWS||c<0||c>=COLS)return;
if(!grid[r]||!grid[r][c]||grid[r][c]!==color)return;
const key=r+','+c;
if(visited[key])return;
visited[key]=true;
matches.push({r,c});
dfs(r-1,c);dfs(r+1,c);dfs(r,c-1);dfs(r,c+1);
}
dfs(row,col);
return matches;
}

function removeBubbles(matches){
matches.forEach(({r,c})=>{
if(grid[r])grid[r][c]=null;
});
return matches.length;
}

function checkGameOver(){
for(let c=0;c<COLS;c++){
if(grid[ROWS-1]&&grid[ROWS-1][c])return true;
}
return movesLeft<=0;
}

canvas.onclick=(e)=>{
if(!currentBall.color||movesLeft<=0)return;
let rect=canvas.getBoundingClientRect();
let clickX=e.clientX-rect.left;
let clickY=e.clientY-rect.top;
let c=Math.floor(clickX/SIZE);
let r=Math.floor((clickY-50)/SIZE);
if(r<0)r=0;
if(r>=ROWS)r=ROWS-1;
if(c<0)c=0;
if(c>=COLS)c=COLS-1;
if(!grid[r])grid[r]=[];
let placed=false;
while(r<ROWS&&!placed){
if(r==0||!grid[r-1]||!grid[r-1][c]){
if(!grid[r])grid[r]=[];
grid[r][c]=currentBall.color;
placed=true;
break;
}
r++;
}
if(placed){
let matches=findMatches(r,c);
if(matches.length>=3){
let removed=removeBubbles(matches);
if(matches.length===3)score+=10;
else if(matches.length===4){score+=25;}else{score+=50+(matches.length-5)*10;}
document.getElementById('score').textContent='–û—á–∫–∏: '+score;
}
movesLeft--;
document.getElementById('moves').textContent='–•–æ–¥—ã: '+movesLeft;
if(checkGameOver()){
alert('–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –í–∞—à —Å—á—ë—Ç: '+score);
return;
}
currentBall.color=nextColor;
nextColor=COLORS[Math.floor(Math.random()*COLORS.length)];
draw();
}
};

canvas.onmousemove=(e)=>{
let rect=canvas.getBoundingClientRect();
mouseX=e.clientX-rect.left;
mouseY=e.clientY-rect.top;
draw();
};

function startGame(){
initGrid();
score=0;
movesLeft=30;
document.getElementById('score').textContent='–û—á–∫–∏: 0';
document.getElementById('moves').textContent='–•–æ–¥—ã: 30';
currentBall.color=COLORS[Math.floor(Math.random()*COLORS.length)];
nextColor=COLORS[Math.floor(Math.random()*COLORS.length)];
draw();
}

document.getElementById('restart').addEventListener('click',startGame);
startGame();
</script>
</body>
</html>
