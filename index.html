<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Web Agent - Ollama AI Chat</title><style>* { margin: 0; padding: 0; box-sizing: border-box; }body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; }#main-container { display: flex; width: 100%; height: 100vh; }#sidebar-panel { width: 350px; background: white; border-right: 1px solid #e0e0e0; display: flex; flex-direction: column; box-shadow: 2px 0 10px rgba(0,0,0,0.1); }#sidebar-header { background: #667eea; color: white; padding: 16px; font-size: 16px; font-weight: 600; text-align: center; }#sidebar-messages { flex: 1; overflow-y: auto; padding: 16px; background: #f9f9f9; }#sidebar-input-area { padding: 12px; background: white; border-top: 1px solid #e0e0e0; display: flex; gap: 8px; flex-direction: column; }#sidebar-input { padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px; font-family: inherit; }#sidebar-input:focus { outline: none; border-color: #667eea; }#sidebar-send { padding: 10px 16px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 13px; }.message { margin-bottom: 12px; display: flex; animation: slideIn 0.3s ease; }.message.user { justify-content: flex-end; }.message-text { max-width: 85%; padding: 10px 12px; border-radius: 6px; word-wrap: break-word; line-height: 1.3; font-size: 13px; }.message.user .message-text { background: #667eea; color: white; }.message.ai .message-text { background: white; color: #333; border: 1px solid #e0e0e0; }.message.error .message-text { background: #ffebee; color: #c62828; border: 1px solid #ef5350; }@keyframes slideIn { from { opacity: 0; } to { opacity: 1; } }#content { flex: 1; display: flex; align-items: center; justify-content: center; padding: 20px; }.container { width: 100%; max-width: 800px; background: white; border-radius: 12px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); display: flex; flex-direction: column; height: 600px; overflow: hidden; }.header { background: #667eea; color: white; padding: 20px; text-align: center; font-size: 24px; font-weight: 600; }.messages { flex: 1; overflow-y: auto; padding: 20px; background: #f5f5f5; }.message { margin-bottom: 15px; display: flex; animation: slideIn 0.3s ease; }.message.user { justify-content: flex-end; }.message-text { max-width: 70%; padding: 12px 16px; border-radius: 8px; word-wrap: break-word; line-height: 1.4; }.message.user .message-text { background: #667eea; color: white; }.message.ai .message-text { background: white; color: #333; border: 1px solid #e0e0e0; }.message.error .message-text { background: #ffebee; color: #c62828; border: 1px solid #ef5350; }.input-area { padding: 20px; background: white; border-top: 1px solid #e0e0e0; display: flex; gap: 10px; }#main-input { flex: 1; padding: 12px 16px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; font-family: inherit; }#main-input:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); }#main-send { padding: 12px 24px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px; transition: background 0.2s; }#main-send:hover { background: #5568d3; }#main-send:active { background: #445bc5; }#main-send:disabled { background: #ccc; cursor: not-allowed; }.loading { color: #999; font-style: italic; }</style></head><body><div id="main-container"><div id="sidebar-panel"><div id="sidebar-header">✨ Web Agent</div><div id="sidebar-messages"></div><div id="sidebar-input-area"><input type="text" id="sidebar-input" placeholder="Ask anything..." /><button id="sidebar-send">Send</button></div></div><div id="content"><div class="container"><div class="header">✨ Web Agent - Ollama AI</div><div class="messages" id="messages"></div><div class="input-area"><input type="text" id="main-input" placeholder="Ask me something..." /><button id="main-send">Send</button></div></div></div></div><script>const OLLAMA_URL = 'http://127.0.0.1:11434/api/generate';const MODEL = 'llama2';let mainMessages = document.getElementById('messages');let sidebarMessages = document.getElementById('sidebar-messages');let mainInput = document.getElementById('main-input');let mainSend = document.getElementById('main-send');let sidebarInput = document.getElementById('sidebar-input');let sidebarSend = document.getElementById('sidebar-send');let mainLoading = false;let sidebarLoading = false;function addMessage(text, type = 'user', isSidebar = false) {const div = document.createElement('div');div.className = `message ${type}`;div.innerHTML = `<div class="message-text">${escapeHtml(text)}</div>`;(isSidebar ? sidebarMessages : mainMessages).appendChild(div);(isSidebar ? sidebarMessages : mainMessages).scrollTop = (isSidebar ? sidebarMessages : mainMessages).scrollHeight;}function escapeHtml(text) {const div = document.createElement('div');div.textContent = text;return div.innerHTML;}async function sendMessage(isSidebar = false) {const input = isSidebar ? sidebarInput : mainInput;const text = input.value.trim();if (!text) { console.log('Empty text, not sending'); return; }const isLoading = isSidebar ? sidebarLoading : mainLoading;if (isLoading) { console.log('Already loading'); return; }console.log('Sending message:', text, 'isSidebar:', isSidebar);(isSidebar ? sidebarLoading : mainLoading) = true;const button = isSidebar ? sidebarSend : mainSend;button.disabled = true;input.disabled = true;addMessage(text, 'user', isSidebar);addMessage('Thinking...', 'loading', isSidebar);input.value = '';try {console.log('Fetching from:', OLLAMA_URL);const response = await fetch(OLLAMA_URL, {method: 'POST',headers: { 'Content-Type': 'application/json' },body: JSON.stringify({model: MODEL,prompt: text,stream: false})});console.log('Response status:', response.status);if (!response.ok) throw new Error(`HTTP ${response.status}`);const data = await response.json();console.log('Response data:', data);const messagesDiv = isSidebar ? sidebarMessages : mainMessages;if (messagesDiv.lastChild) messagesDiv.removeChild(messagesDiv.lastChild);if (data.response) {addMessage(data.response.trim(), 'ai', isSidebar);} else {throw new Error('No response from model');}} catch (err) {console.error('Error:', err);const messagesDiv = isSidebar ? sidebarMessages : mainMessages;if (messagesDiv.lastChild) messagesDiv.removeChild(messagesDiv.lastChild);addMessage(`Error: ${err.message}. Make sure Ollama is running on ${OLLAMA_URL}`, 'error', isSidebar);}(isSidebar ? sidebarLoading : mainLoading) = false;button.disabled = false;input.disabled = false;input.focus();}mainSend.addEventListener('click', function(e) { console.log('Main send clicked'); sendMessage(false); });mainInput.addEventListener('keypress', function(e) { if (e.key === 'Enter') { console.log('Main enter pressed'); sendMessage(false); } });sidebarSend.addEventListener('click', function(e) { console.log('Sidebar send clicked'); sendMessage(true); });sidebarInput.addEventListener('keypress', function(e) { if (e.key === 'Enter') { console.log('Sidebar enter pressed'); sendMessage(true); } });mainInput.focus();console.log('Script initialized');addMessage('Hello! I am Web Agent powered by Ollama AI. Ask me anything! (Make sure Ollama is running on port 11434)', 'ai', false);addMessage('Side panel connected!', 'ai', true);</script></body></html>
