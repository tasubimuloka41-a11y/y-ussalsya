<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=cover"><title>BUBBLE SHOOTER</title><style>*{margin:0;padding:0;box-sizing:border-box}html,body{width:100%;height:100%}body{background:linear-gradient(135deg,#ff006e 0%,#fb5607 25%,#ffbe0b 50%,#8338ec 75%,#3a86ff 100%);font-family:Arial,sans-serif;overflow:hidden;touch-action:none}#gameWrap{width:100%;height:100%;display:flex;flex-direction:column}#topBar{padding:12px;background:rgba(0,0,0,0.25);display:flex;justify-content:center;gap:50px;color:#fff;flex-shrink:0;border-bottom:3px solid #fff}.stat{text-align:center}.stat-label{font-size:11px;color:#aaa;font-weight:bold}.stat-val{font-size:32px;font-weight:bold;color:#fff;text-shadow:2px 2px 5px rgba(0,0,0,0.7)}#cvs{flex:1;display:block;width:100%;cursor:crosshair}#modal{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.95);padding:40px;border-radius:20px;text-align:center;display:none;z-index:2000;border:3px solid #ffbe0b;box-shadow:0 10px 40px rgba(0,0,0,0.8)}#modal h1{color:#ffbe0b;font-size:45px;margin-bottom:25px;text-shadow:2px 2px 6px #000}#modal p{color:#fff;font-size:20px;margin:12px 0}#btn{background:linear-gradient(135deg,#ff006e,#fb5607);color:#fff;border:none;padding:18px 40px;font-size:18px;border-radius:12px;cursor:pointer;margin-top:30px;font-weight:bold;box-shadow:0 5px 20px rgba(255,20,147,0.6);transition:all 0.3s}#btn:hover{transform:scale(1.15);box-shadow:0 8px 30px rgba(255,20,147,0.8)}</style></head><body><div id="gameWrap"><div id="topBar"><div class="stat"><div class="stat-label">SCORE</div><div class="stat-val" id="score">0</div></div><div class="stat"><div class="stat-label">MOVES</div><div class="stat-val" id="moves">30</div></div></div><canvas id="gameCanvas"></canvas><div id="modal"><h1>GAME OVER!</h1><p>Score: <span id="finalScore">0</span></p><p>Best: <span id="bestScore">0</span></p><button id="btn">PLAY AGAIN</button></div></div><script src="https://telegram.org/js/telegram-web-app.js"></script><script>if(window.Telegram&&window.Telegram.WebApp){Telegram.WebApp.ready();Telegram.WebApp.expand();}const canvas=document.getElementById('gameCanvas');const ctx=canvas.getContext('2d');const scoreEl=document.getElementById('score');const movesEl=document.getElementById('moves');const modal=document.getElementById('modal');const finalScoreEl=document.getElementById('finalScore');const bestScoreEl=document.getElementById('bestScore');const playBtn=document.getElementById('btn');let width,height,ballRadius;const rows=6,cols=6;const colors=['#FF1493','#FF69B4','#FFD700','#00CED1','#32CD32','#FF6347','#4169E1','#FF8C00'];let balls=[],popAnims=[],score=0,moves=30;let shooter={x:0,y:0,color:0},animating=false;function init(){width=canvas.width=window.innerWidth;height=canvas.height=window.innerHeight-50;ballRadius=Math.min(width/(cols*1.2),height/(rows*1.2))/2;ballRadius=Math.max(ballRadius,15);shooter.y=height-ballRadius*3;balls=[];popAnims=[];for(let r=0;r<rows;r++){for(let c=0;c<cols;c++){let col=Math.floor(Math.random()*colors.length);let pos=getBallPos(r,c);balls.push({r,c,x:pos.x,y:pos.y,color:col})}}shooter.color=Math.floor(Math.random()*colors.length);shooter.x=width/2;score=0;moves=30;updateUI();modal.style.display='none';gameLoop();}function getBallPos(r,c){let spacing=ballRadius*2.2;let startX=(width-cols*spacing)/2;let startY=(height-rows*spacing)/2;return{x:startX+c*spacing+ballRadius,y:startY+r*spacing+ballRadius}}function updateUI(){scoreEl.textContent=score;movesEl.textContent=moves}function gameLoop(){ctx.clearRect(0,0,width,height);balls.forEach(b=>{drawBall(b.x,b.y,b.color,ballRadius)});popAnims.forEach((a,i)=>{let prog=a.time/a.duration;if(prog>=1){popAnims.splice(i,1);return}let s=1+prog*0.4;let alpha=1-prog;ctx.save();ctx.globalAlpha=alpha;drawBall(a.x,a.y,a.color,ballRadius*s);ctx.restore();a.time+=16});let size=ballRadius*1.1;ctx.globalAlpha=0.9;drawBall(shooter.x,shooter.y,shooter.color,size);ctx.globalAlpha=1;requestAnimationFrame(gameLoop)}function drawBall(x,y,colorIdx,r){ctx.fillStyle=colors[colorIdx%colors.length];ctx.beginPath();ctx.arc(x,y,r*0.85,0,Math.PI*2);ctx.fill();ctx.strokeStyle='#fff';ctx.lineWidth=Math.max(2,r*0.15);ctx.stroke()}function shoot(mouseX,mouseY){if(animating||moves<=0)return;animating=true;let dx=mouseX-shooter.x;let dy=mouseY-shooter.y;let dist=Math.sqrt(dx*dx+dy*dy);if(dist<10){animating=false;return}let vx=(dx/dist)*6;let vy=(dy/dist)*6;let bx=shooter.x;let by=shooter.y;let bColor=shooter.color;let int=setInterval(()=>{bx+=vx;by+=vy;if(bx<ballRadius||bx>width-ballRadius)vx=-vx;let hit=-1;for(let i=0;i<balls.length;i++){let d=Math.sqrt((bx-balls[i].x)**2+(by-balls[i].y)**2);if(d<ballRadius*2){hit=i;break}}if(hit>=0){clearInterval(int);let row=Math.round(by/(ballRadius*2.2));row=Math.max(0,Math.min(row,rows-1));let bestCol=-1,bestDist=999;for(let c=0;c<cols;c++){let pos=getBallPos(row,c);let d=Math.abs(pos.x-bx);if(d<bestDist&&!balls.find(b=>b.r===row&&b.c===c)){bestDist=d;bestCol=c}}if(bestCol>=0){let pos=getBallPos(row,bestCol);balls.push({r:row,c:bestCol,x:pos.x,y:pos.y,color:bColor});let lastIdx=balls.length-1;let group=getGroup(lastIdx);if(group.length>=3){let idxs=group.sort((a,b)=>b-a);idxs.forEach(i=>{let b=balls[i];popAnims.push({x:b.x,y:b.y,color:b.color,time:0,duration:400});balls.splice(i,1)});score+=group.length*10;updateUI()}}moves--;updateUI();shooter.color=Math.floor(Math.random()*colors.length);animating=false;if(moves<=0)endGame();return}if(by<-ballRadius*2){clearInterval(int);animating=false}},30)}function getGroup(idx){let visited=new Set(),queue=[idx],group=[];while(queue.length){let i=queue.shift();if(visited.has(i))continue;visited.add(i);group.push(i);let ball=balls[i];for(let j=0;j<balls.length;j++){if(j!==i&&!visited.has(j)&&ball.color===balls[j].color){let d=Math.hypot(balls[j].x-ball.x,balls[j].y-ball.y);if(d<ballRadius*2.3)queue.push(j)}}}return group}function endGame(){let best=parseInt(localStorage.getItem('bubbleShooterBest')||'0');if(score>best){best=score;localStorage.setItem('bubbleShooterBest',best)}finalScoreEl.textContent=score;bestScoreEl.textContent=best;modal.style.display='block'}playBtn.onclick=init;canvas.onclick=e=>shoot(e.clientX,e.clientY);canvas.ontouch=e=>{e.preventDefault();let t=e.touches[0];shoot(t.clientX,t.clientY)};window.onresize=init;init();</script></body></html>
