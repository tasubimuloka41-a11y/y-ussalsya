<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>üéÆ BUBBLE SHOOTER PREMIUM</title>
<style>
@keyframes bgAnim{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{width:100vw;height:100vh;overflow:hidden;background:linear-gradient(45deg,#FF1744,#F50057,#D500F9,#651FFF,#2979FF,#00B0FF,#00E5FF,#1DE9B6,#00E676,#76FF03,#C6FF00,#FFEA00,#FFC400,#FF9100);background-size:400% 400%;animation:bgAnim 20s ease infinite;font-family:Arial,sans-serif;touch-action:none}
#gameWrap{width:100%;height:100%;position:relative;display:flex;flex-direction:column}
#topBar{position:absolute;top:5px;left:50%;transform:translateX(-50%);display:flex;gap:15px;z-index:1000;background:rgba(0,0,0,0.9);padding:10px 20px;border-radius:40px;box-shadow:0 5px 20px rgba(0,0,0,0.5)}
.score-box{display:flex;flex-direction:column;align-items:center;color:#fff;text-shadow:2px 2px 6px #000}
.score-lbl{font-size:9px;opacity:0.9;letter-spacing:1px;font-weight:bold;color:#FFD700}
.score-val{font-size:24px;font-weight:bold;margin-top:1px;color:#00FF00}
#cvs{display:block;width:100%;height:100%;touch-action:none}
#modal{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(135deg,#1a237e,#311b92);padding:35px;border-radius:20px;text-align:center;display:none;z-index:2000;min-width:260px;box-shadow:0 10px 40px rgba(0,0,0,0.7)}
#modal h1{color:#FFD700;font-size:44px;margin-bottom:15px;text-shadow:0 0 25px rgba(255,215,0,0.9)}
#modal p{color:#fff;font-size:18px;margin:10px 0}
#btn{background:linear-gradient(135deg,#FF1744,#F50057);color:#fff;border:none;padding:15px 40px;font-size:18px;border-radius:40px;cursor:pointer;margin-top:20px;box-shadow:0 6px 18px rgba(245,0,87,0.7);transition:all 0.3s}
#btn:hover{transform:scale(1.05);box-shadow:0 10px 25px rgba(245,0,87,0.9)}
</style>
</head>
<body>
<div id="gameWrap">
<div id="topBar">
<div class="score-box"><div class="score-lbl">–û–ß–ö–ò</div><div class="score-val" id="sc">0</div></div>
<div class="score-box"><div class="score-lbl">–•–û–î–´</div><div class="score-val" id="mv">30</div></div>
</div>
<canvas id="cvs"></canvas>
<div id="modal">
<h1>GAME OVER!</h1>
<p>–û—á–∫–∏: <span id="fs">0</span></p>
<p>–†–µ–∫–æ—Ä–¥: <span id="bs">0</span></p>
<button id="btn">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
</div>
</div>
<script>
const c=document.getElementById('cvs');const ctx=c.getContext('2d');const scD=document.getElementById('sc');const mvD=document.getElementById('mv');const mod=document.getElementById('modal');const fsE=document.getElementById('fs');const bsE=document.getElementById('bs');const btnE=document.getElementById('btn');let W,H,R,cols;function rsz(){W=window.innerWidth;H=window.innerHeight;c.width=W;c.height=H;R=Math.min(W,H)/17;cols=Math.floor(W/(R*2))}rsz();window.addEventListener('resize',()=>{rsz();ini()});const CLR=['#FF1744','#00E5FF','#FFD600','#00E676'];let g=[];let s=0;let m=30;let b=localStorage.getItem('b')||0;let cr=null;let nx=null;let sh=0;let oY=0;let tY=0;let fl=null;let pop=[];function ini(){g=[];s=0;m=30;sh=0;oY=0;tY=0;fl=null;pop=[];scD.textContent=s;mvD.textContent=m;bsE.textContent=b;mod.style.display='none';for(let r=0;r<5;r++){g[r]=[];for(let C=0;C<cols;C++){if(r%2===0&&C===cols-1)continue;g[r][C]={c:CLR[Math.floor(Math.random()*CLR.length)],x:getX(C,r),y:getY(r),sc:0}}}cr={c:CLR[Math.floor(Math.random()*CLR.length)],x:W/2,y:H-60};nx={c:CLR[Math.floor(Math.random()*CLR.length)]};drw()}function getX(C,r){return R+(C*R*2)+(r%2===1?R:0)}function getY(r){return 60+oY+(r*R*2.1)}function drw(){ctx.clearRect(0,0,W,H);if(Math.abs(oY-tY)>0.5){oY+=(tY-oY)*0.15;for(let r=0;r<g.length;r++){for(let C=0;C<g[r].length;C++){if(g[r][C])g[r][C].y=getY(r)}}}for(let r=0;r<g.length;r++){for(let C=0;C<g[r].length;C++){if(g[r][C]){if(g[r][C].sc<1){g[r][C].sc=Math.min(1,g[r][C].sc+0.08)}dB(g[r][C].x,g[r][C].y,g[r][C].c,false,g[r][C].sc)}}}pop.forEach((p,i)=>{p.tm++;if(p.tm<=20){p.op=1-(p.tm/7);p.sc=1+(p.tm*0.15);dB(p.x,p.y,p.c,true,p.sc,p.op)}else{pop.splice(i,1)}});if(fl){dB(fl.x,fl.y,fl.c,true)}if(cr&&!fl){dB(cr.x,cr.y,cr.c,true)}requestAnimationFrame(drw)}function dB(x,y,cl,gl=false,sc=1,op=1){ctx.save();ctx.globalAlpha=op;ctx.beginPath();const rr=R*sc;ctx.arc(x,y,rr,0,Math.PI*2);const grd=ctx.createRadialGradient(x-rr/2.5,y-rr/2.5,0,x,y,rr);grd.addColorStop(0,'rgba(255,255,255,1)');grd.addColorStop(0.35,cl);grd.addColorStop(1,shd(cl,-40));ctx.fillStyle=grd;ctx.fill();if(gl){ctx.shadowColor=cl;ctx.shadowBlur=30}ctx.strokeStyle='rgba(255,255,255,0.6)';ctx.lineWidth=3;ctx.stroke();ctx.restore()}function shd(cl,p){const n=parseInt(cl.slice(1),16);const a=Math.round(2.55*p);const R=(n>>16)+a;const G=(n>>8&0xFF)+a;const B=(n&0xFF)+a;return'#'+(0x1000000+(R<255?R<1?0:R:255)*0x10000+(G<255?G<1?0:G:255)*0x100+(B<255?B<1?0:B:255)).toString(16).slice(1)}c.addEventListener('click',hS);c.addEventListener('touchstart',e=>{e.preventDefault();if(e.touches.length>0){const t=e.touches[0];hS({clientX:t.clientX,clientY:t.clientY})}});function hS(e){if(!cr||mod.style.display==='block'||fl)return;const rt=c.getBoundingClientRect();const cX=e.clientX-rt.left;const cY=e.clientY-rt.top;sht(cX,cY)}function sht(tX,tY){const dx=tX-cr.x;const dy=tY-cr.y;const d=Math.sqrt(dx*dx+dy*dy);const vx=(dx/d)*15;const vy=(dy/d)*15;fl={...cr,vx,vy};cr=null;aS()}function aS(){if(!fl)return;fl.x+=fl.vx;fl.y+=fl.vy;if(fl.x<=R||fl.x>=W-R){fl.vx*=-1;fl.x=fl.x<=R?R:W-R}let ht=false;for(let r=0;r<g.length&&!ht;r++){for(let C=0;C<g[r].length&&!ht;C++){if(g[r][C]){const dx=fl.x-g[r][C].x;const dy=fl.y-g[r][C].y;const d=Math.sqrt(dx*dx+dy*dy);if(d<R*1.8){snG(fl,r,C);ht=true}}}}if(fl.y<=60+oY&&!ht){snG(fl,0,Math.round((fl.x-R)/R/2));ht=true}if(!ht)requestAnimationFrame(aS)}function snG(bl,nR,nC){let bR=nR;let bC=nC;let mD=Infinity;for(let r=Math.max(0,nR-1);r<=Math.min(g.length-1,nR+1);r++){for(let C=Math.max(0,nC-1);C<=Math.min(cols-1,nC+1);C++){if(r%2===0&&C===cols-1)continue;if(!g[r]||g[r][C])continue;const gx=getX(C,r);const gy=getY(r);const d=Math.sqrt((bl.x-gx)**2+(bl.y-gy)**2);if(d<mD){mD=d;bR=r;bC=C}}}if(!g[bR])g[bR]=[];g[bR][bC]={c:bl.c,x:getX(bC,bR),y:getY(bR),sc:0.5};fl=null;chM(bR,bC);rF();m--;mvD.textContent=m;sh++;if(sh>=5){sh=0;aR()}cr={c:nx.c,x:W/2,y:H-60};nx={c:CLR[Math.floor(Math.random()*CLR.length)]};chG()}function chM(r,C){const cl=g[r][C].c;const mt=new Set();const tC=[[r,C]];mt.add(`${r},${C}`);while(tC.length){const[rr,cc]=tC.pop();const ng=gN(rr,cc);for(const[nr,nc]of ng){const k=`${nr},${nc}`;if(!mt.has(k)&&g[nr]&&g[nr][nc]&&g[nr][nc].c===cl){mt.add(k);tC.push([nr,nc])}}}if(mt.size>=3){mt.forEach(k=>{const[rr,cc]=k.split(',').map(Number);pop.push({x:g[rr][cc].x,y:g[rr][cc].y,c:g[rr][cc].c,tm:0,op:1,sc:1});g[rr][cc]=null});s+=mt.size*10;scD.textContent=s}}function gN(r,C){const ev=r%2===0;const of=ev?[[-1,0],[-1,-1],[0,-1],[0,1],[1,-1],[1,0]]:[[-1,1],[-1,0],[0,-1],[0,1],[1,0],[1,1]];return of.map(([dr,dc])=>[r+dr,C+dc]).filter(([rr,cc])=>rr>=0&&rr<g.length&&cc>=0&&cc<cols)}function rF(){const cn=new Set();const tC=[];for(let C=0;C<cols;C++){if(g[0]&&g[0][C]){cn.add(`0,${C}`);tC.push([0,C])}}while(tC.length){const[rr,cc]=tC.pop();const ng=gN(rr,cc);for(const[nr,nc]of ng){const k=`${nr},${nc}`;if(!cn.has(k)&&g[nr]&&g[nr][nc]){cn.add(k);tC.push([nr,nc])}}}for(let r=0;r<g.length;r++){for(let C=0;C<cols;C++){if(g[r]&&g[r][C]&&!cn.has(`${r},${C}`)){pop.push({x:g[r][C].x,y:g[r][C].y,c:g[r][C].c,tm:0,op:1,sc:1});g[r][C]=null;s+=5;scD.textContent=s}}}}function aR(){tY-=R*1.8;g.unshift([]);for(let C=0;C<cols;C++){g[0][C]={c:CLR[Math.floor(Math.random()*CLR.length)],x:getX(C,0),y:getY(0),sc:0}}}function chG(){for(let r=0;r<g.length;r++){for(let C=0;C<g[r].length;C++){if(g[r][C]&&g[r][C].y>=H-90){gO();return}}}if(m<=0){let hs=false;for(let r=0;r<g.length;r++){for(let C=0;C<g[r].length;C++){if(g[r][C]){hs=true;break}}if(hs)break}if(hs)gO()}}function gO(){mod.style.display='block';fsE.textContent=s;if(s>b){b=s;localStorage.setItem('b',b);bsE.textContent=b}}btnE.addEventListener('click',ini);ini();
</script>
</body>
</html>
