<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>BUBBLE</title><style>*{margin:0;padding:0}body{width:100vw;height:100vh;background:linear-gradient(135deg,#FF00FF,#00FFFF,#FFFF00,#FF0080);overflow:hidden;font-family:Arial}canvas{display:block;width:100%;height:100%;background:inherit}#ui{position:fixed;top:20px;left:50%;transform:translateX(-50%);color:#fff;font-size:24px;font-weight:bold;background:rgba(0,0,0,0.6);padding:10px 20px;border-radius:10px;z-index:10}</style></head><body><canvas id="c"></canvas><div id="ui">SCORE: <span id="s">0</span> | MOVES: <span id="m">30</span></div><script>const c=document.getElementById('c'),x=c.getContext('2d');let w=c.width=window.innerWidth,h=c.height=window.innerHeight;const ROWS=8,COLS=6,SIZE=18,COLORS=['#FF0000','#00FF00','#0000FF','#FFFF00','#FF00FF','#00FFFF','#FFA500'];let grid=[],score=0,moves=30,bullet=null,angle=0;function init(){grid=[];for(let r=0;r<ROWS;r++){grid[r]=[];for(let c=0;c<COLS;c++){grid[r][c]=Math.floor(Math.random()*COLORS.length)}}}function pos(r,c){const ox=r%2*SIZE;return{x:120+ox+c*SIZE*2,y:50+r*SIZE*1.75}}function draw(){x.clearRect(0,0,w,h);for(let r=0;r<ROWS;r++){for(let cc=0;cc<COLS;cc++){if(grid[r]&&grid[r][cc]!==undefined&&grid[r][cc]>=0){const p=pos(r,cc);x.beginPath();x.arc(p.x,p.y,SIZE,0,Math.PI*2);x.fillStyle=COLORS[grid[r][cc]];x.fill();x.strokeStyle='#fff';x.lineWidth=2;x.stroke()}}}if(bullet){x.beginPath();x.arc(bullet.x,bullet.y,SIZE-4,0,Math.PI*2);x.fillStyle='#FF1493';x.fill()}const gx=w/2,gy=h-40;x.beginPath();x.arc(gx,gy,12,0,Math.PI*2);x.fillStyle='#00FF00';x.fill();const ax=gx+Math.cos(angle)*25,ay=gy+Math.sin(angle)*25;x.strokeStyle='#fff';x.lineWidth=2;x.beginPath();x.moveTo(gx,gy);x.lineTo(ax,ay);x.stroke()}function shoot(){if(moves<=0||bullet)return;moves--;document.getElementById('m').innerText=moves;const gx=w/2,gy=h-40;bullet={x:gx,y:gy,vx:Math.cos(angle)*7,vy:Math.sin(angle)*7}}function update(){if(!bullet)return;bullet.x+=bullet.vx;bullet.y+=bullet.vy;if(bullet.x<0||bullet.x>w||bullet.y<0){bullet=null;return}for(let r=0;r<ROWS;r++){if(!grid[r])continue;for(let c=0;c<COLS;c++){if(grid[r][c]!==undefined&&grid[r][c]>=0){const p=pos(r,c),d=Math.sqrt((bullet.x-p.x)**2+(bullet.y-p.y)**2);if(d<SIZE+4){const color=grid[r][c];grid[r][c]=-1;bullet=null;score+=10;document.getElementById('s').innerText=score;findAndRemove(r,c,color);if(moves<=0){setTimeout(()=>{alert('Game Over! Score: '+score);location.reload()},500)}return}}}}}}function findAndRemove(startR,startC,targetColor){const visited=new Set(),group=[];function dfs(r,c){const key=r+','+c;if(visited.has(key)||r<0||r>=ROWS||c<0||c>=COLS)return;const cell=grid[r]?grid[r][c]:undefined;if(cell===undefined||cell===-1||cell!==targetColor)return;visited.add(key);group.push([r,c]);dfs(r-1,c);dfs(r+1,c);dfs(r,c-1);dfs(r,c+1)}dfs(startR,startC);if(group.length>=3){group.forEach(([r,c])=>{grid[r][c]=-1;score+=50});document.getElementById('s').innerText=score}}function loop(){update();draw();requestAnimationFrame(loop)}document.addEventListener('mousemove',(e)=>{if(!bullet)angle=Math.atan2(e.clientY-(h-40),e.clientX-(w/2))});c.addEventListener('click',shoot);window.addEventListener('resize',()=>{w=c.width=window.innerWidth;h=c.height=window.innerHeight});init();draw();loop();</script></body></html>
